# Solana Market Maker Bot Configuration

# Environment
NODE_ENV=production
LOG_LEVEL=info

# Network Configuration
# Multiple RPC URLs for failover and load balancing (comma-separated)
# Recommendation: Use 3-5 reliable providers for production
RPC_URLS=https://api.mainnet-beta.solana.com,https://solana-api.projectserum.com

# Wallet Configuration
MASTER_WALLET_PRIVATE_KEY=your_master_wallet_private_key_base58_here
MASTER_WALLET_SEED=your_optional_seed_for_hd_wallet_generation
WALLET_ENCRYPTION_KEY=your_32_character_encryption_key
NUMBER_OF_WALLETS=100
WALLETS_FILE_PATH=./wallets/encrypted-wallets.json
USE_EXISTING_WALLETS=false

# Trading Pair Configuration
BASE_MINT=So11111111111111111111111111111111111111112  # Token to trade (default: SOL)
QUOTE_MINT=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v  # Quote token (default: USDC)
BASE_DECIMALS=9
QUOTE_DECIMALS=6

# Trading Configuration
ORDER_REFRESH_TIME_SECONDS=15
SPREAD_BPS=100  # 100 basis points = 1%
INVENTORY_SKEW_BPS=50
BASE_TRADE_SIZE_QUOTE=10  # Trade size in quote token (USDC)
MAX_POSITION_QUOTE=1000  # Maximum position in quote token
MIN_PROFIT_BPS=5
PRICE_TOLERANCE_BPS=20

# Auto-Funding Configuration
AUTO_FUND_ENABLED=true
AUTO_FUND_THRESHOLD_SOL=0.05  # Auto fund when balance below this
FUNDING_AMOUNT_SOL=0.2  # Amount to fund each wallet
AUTO_FUND_THRESHOLD_TOKEN=  # Optional: token threshold
FUNDING_AMOUNT_TOKEN=  # Optional: token funding amount

# Auto-Withdrawal Configuration
AUTO_WITHDRAW_ENABLED=true
AUTO_WITHDRAW_THRESHOLD_SOL=0.5  # Auto withdraw when balance above this
MIN_BALANCE_TO_KEEP_SOL=0.05  # Minimum balance to keep in wallet

# MEV Protection
MEV_PROTECTION_ENABLED=true
BASE_PRIORITY_FEE=10000  # microlamports
MAX_PRIORITY_FEE=100000  # microlamports
ENABLE_TRANSACTION_SIMULATION=true
ENABLE_SANDWICH_DETECTION=true
COMPUTE_UNIT_LIMIT=200000

# Rug-Pull Detection
RUG_PULL_DETECTION_ENABLED=true
LP_MONITORING_ENABLED=true
SUPPLY_CHANGE_THRESHOLD_PERCENT=20
HOLDER_CONCENTRATION_THRESHOLD_PERCENT=50
RUG_PULL_CHECK_INTERVAL_MS=30000
AUTO_EXIT_ON_RUG_PULL=true

# Circuit Breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_PRICE_DEVIATION_PERCENT=50
CIRCUIT_BREAKER_VOLATILITY_PERCENT=100
CIRCUIT_BREAKER_LOSS_PERCENT=10
CIRCUIT_BREAKER_CONSECUTIVE_FAILURES=5
CIRCUIT_BREAKER_COOLDOWN_MS=300000  # 5 minutes
CIRCUIT_BREAKER_GRADUAL_RESUME_STEPS=5

# Risk Management
MAX_SLIPPAGE_PERCENT=1.0
MAX_DAILY_LOSS_PERCENT=10
MAX_POSITION_SIZE_PERCENT=50

# Strategy Manager
ENABLE_STRATEGIES=true  # Enable advanced strategy modules (liquidity mirror, spread controller, volatility filter, wall manager)

# Paper Trading Mode
PAPER_TRADING_ENABLED=false  # Set to true to enable paper trading (simulation mode)
PAPER_TRADING_INITIAL_BASE=1000  # Initial base token balance for paper trading
PAPER_TRADING_INITIAL_QUOTE=10000  # Initial quote token balance (USDC) for paper trading
PAPER_TRADING_FILL_PROBABILITY=0.8  # Probability of order being filled (0-1)
PAPER_TRADING_FILL_DELAY_MS=2000  # Simulated fill delay in milliseconds
PAPER_TRADING_SLIPPAGE_PERCENT=0.1  # Simulated slippage percentage
PAPER_TRADING_FEE_PERCENT=0.3  # Simulated trading fee percentage
PAPER_TRADING_REALISTIC_FILLS=true  # Use market price to determine realistic fills

# Database
DB_PATH=./db/market-maker.sqlite

# API Keys (Optional)
JUPITER_API_KEY=  # Optional: For paid tier with higher rate limits (https://portal.jup.ag/pricing)
JUPITER_DISABLED=false  # Set to 'true' to disable Jupiter if network/firewall blocks lite-api.jup.ag (bot works fine with Birdeye + Dexscreener)
BIRDEYE_API_KEY=your_birdeye_api_key_here
PYTH_HERMES_URL=https://hermes.pyth.network

# Enhanced Price Feed Configuration (v2.0+)
# Cache Settings
PRICE_FEED_CACHE_DURATION_MS=5000               # How long to cache fresh prices (default: 5s)
PRICE_FEED_RECENT_CACHE_MS=30000                # Recent cache fallback duration (default: 30s)
PRICE_FEED_STALE_CACHE_MS=300000                # Stale cache fallback duration (default: 5min)

# Aggregation Settings
PRICE_FEED_MIN_SOURCES=2                        # Minimum sources for Tier 1 pricing (default: 2)
PRICE_FEED_OUTLIER_THRESHOLD=20                 # Outlier detection deviation % (default: 20%)

# Retry Configuration
PRICE_FEED_MAX_RETRIES=3                        # Maximum retry attempts (default: 3)
PRICE_FEED_INITIAL_DELAY_MS=100                 # Initial backoff delay (default: 100ms)
PRICE_FEED_BACKOFF_MULTIPLIER=2                 # Exponential backoff multiplier (default: 2x)
PRICE_FEED_MAX_DELAY_MS=1000                    # Maximum backoff delay (default: 1s)

# Health Monitoring
PRICE_FEED_FAILURE_THRESHOLD=5                  # Failures before marking unhealthy (default: 5)
PRICE_FEED_SUCCESS_RECOVERY_THRESHOLD=3         # Successes to mark healthy (default: 3)

# Validation
PRICE_FEED_PRICE_DEVIATION_THRESHOLD=15         # Max deviation between sources (default: 15%)

# Source-specific Fallbacks
PYTH_HERMES_FALLBACK_URL=https://hermes-beta.pyth.network  # Pyth fallback endpoint

# Feature Flags (Advanced)
PRICE_FEED_ENABLE_RETRY_LOGIC=true              # Enable smart retry with backoff
PRICE_FEED_ENABLE_HEALTH_MONITORING=true        # Enable health status tracking
PRICE_FEED_ENABLE_RELIABILITY_TRACKING=true     # Enable reliability metrics
PRICE_FEED_ENABLE_PRICE_VALIDATION=true         # Enable outlier detection
PRICE_FEED_ENABLE_DETAILED_LOGGING=false        # Enable verbose price feed logging
PRICE_FEED_ENABLE_METRICS_COLLECTION=true       # Enable comprehensive metrics

# Logging
LOG_FILE=logs/bot.log

# Legacy Support (for backward compatibility)
# FUNDING_WALLET_PRIVATE_KEY=  # Use MASTER_WALLET_PRIVATE_KEY instead
# TRADING_WALLET_PRIVATE_KEYS=  # Use wallet generation instead
